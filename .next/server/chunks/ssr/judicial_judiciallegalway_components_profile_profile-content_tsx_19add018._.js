module.exports=[62717,a=>{"use strict";var b=a.i(83499),c=a.i(626),d=a.i(42604),e=a.i(20729),f=a.i(43929),g=a.i(86485),h=a.i(12562),i=a.i(71107),j=a.i(44558),k=a.i(32690),l=a.i(7959),m=a.i(64767),n=a.i(66921),o=a.i(38960),p=a.i(26658),q=a.i(95240),r=a.i(95112),s=a.i(61026);let t=(0,a.i(74002).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var u=a.i(954),v=a.i(28714);function w({user:a,profile:w}){let x=(0,d.useRouter)(),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)({full_name:w?.full_name||"",phone:w?.phone||""}),[C,D]=(0,c.useState)([]),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)([]),[K,L]=(0,c.useState)(null);(0,c.useEffect)(()=>{!async function(){let b=(0,v.createClient)(),[c,d,e,f,g]=await Promise.all([b.from("purchases").select("*").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(10),b.from("saved_cases").select("*").eq("user_id",a.id),b.from("user_progress").select("*").eq("user_id",a.id),b.from("activity_logs").select("*").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(10),b.from("subscriptions").select("*").eq("user_id",a.id).eq("status","active").single()]);D(c.data||[]),F(d.data||[]),H(e.data||[]),J(f.data||[]),L(g.data)}()},[a.id]);let M=async()=>{let b=(0,v.createClient)();await b.from("profiles").upsert({id:a.id,...A,email:a.email,updated_at:new Date().toISOString()}),z(!1),x.refresh()},N=async()=>{let a=(0,v.createClient)();await a.auth.signOut(),x.push("/")},O=G.reduce((a,b)=>a+Math.round(b.current_page/b.total_pages*100),0)/(G.length||1);return(0,b.jsx)("div",{className:"container mx-auto px-4 py-8 lg:px-8",children:(0,b.jsxs)("div",{className:"grid gap-8 lg:grid-cols-3",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)(l.Avatar,{className:"h-24 w-24 mx-auto mb-4 border-4 border-accent",children:[(0,b.jsx)(l.AvatarImage,{src:w?.avatar_url||"/placeholder.svg"}),(0,b.jsx)(l.AvatarFallback,{className:"bg-primary text-primary-foreground text-2xl",children:(w?.full_name||a.email||"U").charAt(0).toUpperCase()})]}),(0,b.jsx)("h2",{className:"font-serif text-xl font-bold text-foreground",children:w?.full_name||"User"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:a.email}),(0,b.jsx)(j.Badge,{variant:"secondary",className:"mt-2",children:w?.role==="admin"?"Administrator":"Student"})]}),(0,b.jsx)("div",{className:"mt-6 p-4 rounded-lg bg-muted/50",children:K?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:"Premium Plan"}),(0,b.jsx)(j.Badge,{className:"bg-green-500",children:"Active"})]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Expires: ",new Date(K.end_date).toLocaleDateString()]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"font-medium text-foreground mb-2",children:"Free Plan"}),(0,b.jsx)(g.Button,{size:"sm",className:"w-full",asChild:!0,children:(0,b.jsx)(e.default,{href:"/pricing",children:"Upgrade to Premium"})})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[(0,b.jsxs)("div",{className:"text-center p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)(o.BookOpen,{className:"h-6 w-6 mx-auto text-primary mb-1"}),(0,b.jsx)("p",{className:"text-xl font-bold text-foreground",children:C.length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Purchased"})]}),(0,b.jsxs)("div",{className:"text-center p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)(p.Bookmark,{className:"h-6 w-6 mx-auto text-accent mb-1"}),(0,b.jsx)("p",{className:"text-xl font-bold text-foreground",children:E.length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Saved Cases"})]})]}),(0,b.jsxs)(g.Button,{variant:"outline",className:"w-full mt-6 gap-2 bg-transparent",onClick:N,children:[(0,b.jsx)(r.LogOut,{className:"h-4 w-4"}),"Sign Out"]})]})})}),(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsxs)(k.Tabs,{defaultValue:"overview",className:"space-y-6",children:[(0,b.jsxs)(k.TabsList,{className:"w-full justify-start",children:[(0,b.jsx)(k.TabsTrigger,{value:"overview",children:"Overview"}),(0,b.jsx)(k.TabsTrigger,{value:"purchases",children:"Purchases"}),(0,b.jsx)(k.TabsTrigger,{value:"saved",children:"Saved Cases"}),(0,b.jsx)(k.TabsTrigger,{value:"activity",children:"Activity"}),(0,b.jsx)(k.TabsTrigger,{value:"settings",children:"Settings"})]}),(0,b.jsxs)(k.TabsContent,{value:"overview",className:"space-y-6",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Award,{className:"h-5 w-5 text-accent"}),"Learning Progress"]})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{children:"Overall Progress"}),(0,b.jsxs)("span",{className:"font-medium",children:[Math.round(O),"%"]})]}),(0,b.jsx)(m.Progress,{value:O})]})}),0===G.length?(0,b.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"Start reading to track your progress"}):(0,b.jsx)("div",{className:"space-y-3",children:G.slice(0,3).map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Material"}),(0,b.jsx)(m.Progress,{value:a.current_page/a.total_pages*100,className:"h-2 mt-1"})]}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[a.current_page,"/",a.total_pages," pages"]})]},a.material_id))})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsx)(f.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsx)(e.default,{href:"/study-materials",children:(0,b.jsxs)(f.CardContent,{className:"p-6 flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-lg bg-primary/10",children:(0,b.jsx)(n.BookLawIcon,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:"Study Materials"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Continue learning"})]})]})})}),(0,b.jsx)(f.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsx)(e.default,{href:"/court-tracker",children:(0,b.jsxs)(f.CardContent,{className:"p-6 flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-lg bg-accent/10",children:(0,b.jsx)(n.ScalesIcon,{className:"h-6 w-6 text-accent"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:"Court Tracker"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[E.length," saved cases"]})]})]})})}),(0,b.jsx)(f.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsx)(e.default,{href:"/store",children:(0,b.jsxs)(f.CardContent,{className:"p-6 flex items-center gap-4",children:[(0,b.jsx)("div",{className:"p-3 rounded-lg bg-primary/10",children:(0,b.jsx)(o.BookOpen,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:"Book Store"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Browse books"})]})]})})})]})]}),(0,b.jsx)(k.TabsContent,{value:"purchases",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Purchase History"})}),(0,b.jsx)(f.CardContent,{children:0===C.length?(0,b.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No purchases yet"}):(0,b.jsx)("div",{className:"space-y-4",children:C.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground capitalize",children:a.item_type.replace("_"," ")}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(a.created_at).toLocaleDateString()})]}),(0,b.jsxs)("span",{className:"font-bold text-foreground",children:["â‚¹",a.amount]})]},a.id))})})]})}),(0,b.jsx)(k.TabsContent,{value:"saved",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Saved Cases"})}),(0,b.jsx)(f.CardContent,{children:0===E.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(p.Bookmark,{className:"h-12 w-12 mx-auto text-muted-foreground mb-2"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No saved cases"}),(0,b.jsx)(g.Button,{variant:"outline",className:"mt-4 bg-transparent",asChild:!0,children:(0,b.jsx)(e.default,{href:"/court-tracker",children:"Browse Cases"})})]}):(0,b.jsx)("div",{className:"space-y-2",children:E.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50",children:[(0,b.jsxs)("span",{className:"font-medium",children:["Case ID: ",a.case_id.slice(0,8),"..."]}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,b.jsx)(e.default,{href:"/court-tracker",children:"View"})})]},a.id))})})]})}),(0,b.jsx)(k.TabsContent,{value:"activity",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Activity Logs"})}),(0,b.jsx)(f.CardContent,{children:0===I.length?(0,b.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No activity yet"}):(0,b.jsx)("div",{className:"space-y-3",children:I.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-muted/50",children:[(0,b.jsx)(q.Clock,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm text-foreground",children:a.action}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(a.created_at).toLocaleString()})]})]},a.id))})})]})}),(0,b.jsx)(k.TabsContent,{value:"settings",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)(f.CardTitle,{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:"Account Settings"}),y?(0,b.jsxs)(g.Button,{size:"sm",onClick:M,children:[(0,b.jsx)(t,{className:"h-4 w-4 mr-2"}),"Save"]}):(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",onClick:()=>z(!0),children:[(0,b.jsx)(s.Edit2,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),(0,b.jsx)(f.CardContent,{className:"space-y-6",children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"name",children:"Full Name"}),(0,b.jsx)(h.Input,{id:"name",value:A.full_name,onChange:a=>B(b=>({...b,full_name:a.target.value})),disabled:!y})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(h.Input,{id:"email",value:a.email||"",disabled:!0,className:"bg-muted"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"phone",children:"Phone"}),(0,b.jsx)(h.Input,{id:"phone",value:A.phone,onChange:a=>B(b=>({...b,phone:a.target.value})),disabled:!y})]})]})})]})})]})})]})})}a.s(["ProfileContent",()=>w],62717)}];

//# sourceMappingURL=judicial_judiciallegalway_components_profile_profile-content_tsx_19add018._.js.map